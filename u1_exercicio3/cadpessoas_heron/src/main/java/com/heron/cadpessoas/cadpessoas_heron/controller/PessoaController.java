package com.heron.cadpessoas.cadpessoas_heron.controller;

import com.heron.cadpessoas.cadpessoas_heron.model.Escolha;
import com.heron.cadpessoas.cadpessoas_heron.model.Pessoa;
import com.heron.cadpessoas.cadpessoas_heron.repository.EscolhaRepository;
import com.heron.cadpessoas.cadpessoas_heron.repository.PessoaRepository;

import java.util.List;

import javax.transaction.Transactional;

import org.springframework.beans.BeanUtils;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class PessoaController {

    @Autowired
    PessoaRepository pessoaRepo;

    @Autowired
    EscolhaRepository escolhasRepo;

    static String urlBackground = "data:image/jpeg;base64,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";

    @GetMapping("/")
    public ModelAndView getInicio() {
        ModelAndView mav = new ModelAndView("index");
        mav.addObject("urlBackground", urlBackground);
        mav.addObject("pessoas", pessoaRepo.findAll());
        return mav;
    }

    @GetMapping("/adicionarPessoa")
    public ModelAndView adicionarPessoa() {
        Pessoa pessoa = new Pessoa();
        ModelAndView mav = new ModelAndView("adicionarPessoa");
        mav.addObject("urlBackground", urlBackground);
        mav.addObject("pessoa", pessoa);
        return mav;
    }

    @GetMapping("/listarPessoas")
    public ModelAndView pessoaAdicionada() {
        ModelAndView mav = new ModelAndView("listarPessoas");
        mav.addObject("pessoa", pessoaRepo.findAll());
        mav.addObject("urlBackground", urlBackground);
        return mav;
    }

    @GetMapping("/editar/{id}")
    public ModelAndView editarPessoa(@PathVariable("id") long id) {
        Pessoa pessoa = pessoaRepo.getById(id);
        ModelAndView mav = new ModelAndView("editarPessoa");
        mav.addObject("urlBackground", urlBackground);
        mav.addObject("pessoaSalva", pessoa);
        return mav;
    }

    @PostMapping("/adicionarPessoa")
    public ModelAndView adicionadaPessoa(Pessoa pessoa) {
        ModelAndView mav = new ModelAndView("adicionadaComSucesso");
        mav.addObject("urlBackground", urlBackground);
        pessoaRepo.save(pessoa);
        return mav;
    }

    @PutMapping("/editar/{id}")
    public String editarSucesso(@PathVariable("id") long id, Pessoa pessoa) {
        Pessoa pessoaAtualizar = pessoaRepo.getById(id);
        BeanUtils.copyProperties(pessoa, pessoaAtualizar, "id_pessoa");
        pessoaRepo.save(pessoaAtualizar);
        return "redirect:/listarPessoas";
    }

    @DeleteMapping("/adicionarPessoa/deletar/{id}")
    public String deletarPessoa(@PathVariable("id") long id) {
        pessoaRepo.deleteById(id);
        return "redirect:/listarPessoas";
    }

    @GetMapping("/jogar/{id}")
    public ModelAndView jogar(@PathVariable("id") Long id){
        ModelAndView mav = new ModelAndView("jogar");
        Pessoa user = pessoaRepo.getById(id);
        Escolha escolhas = escolhasRepo.getById(user.getSequenciaDecisao());
        escolhas.getFraseDeEscolha().replaceAll("player", user.getApelido());
        mav.addObject("pessoa", user);
        mav.addObject("frase", escolhas.getFraseDeEscolha().replaceAll("player", user.getApelido()));
        mav.addObject("opcoes", escolhas.getEscolhas().keySet());
        mav.addObject("chave", escolhas.getEscolhas());
        return mav;
    }

    @Transactional
    @GetMapping("/escolha/{idPessoa}/{idResposta}")
    public String aceitarOpcao(@PathVariable("idPessoa") Long idPessoa, @PathVariable("idResposta") Long idResposta){
        pessoaRepo.updateSequenciaDecisaoById(idPessoa, idResposta);
        return "redirect:/jogar/"+idPessoa;
    }

    @GetMapping("/sobre")
    public ModelAndView sobre(){
        ModelAndView mav = new ModelAndView("sobre");
        mav.addObject("urlBackground", urlBackground);
        return mav;
    }

    @GetMapping("/contato")
    public ModelAndView contato(){
        ModelAndView mav = new ModelAndView("contato");
        mav.addObject("urlBackground", urlBackground);
        return mav;
    }

}